<div *ngIf="isError; else noError">

  <div class="modal is-active">
    <div class="modal-background"></div>
    <div class="modal-content">

      <article class="message is-danger">
        <div class="message-header">
          <p>{{ errorTitle }}</p>
          <button class="delete" (click)="onCancel()" aria-label="delete"></button>
        </div>
        <div class="message-body">
          {{ errorMessage }}
        </div>
      </article>

    </div>
  </div>

</div>

<ng-template #noError>
  <div *ngIf="!isDone; else doneDialog">

  <form [formGroup]="form" (ngSubmit)="onSubmit()">
  <div class="card selection-tagger">
    <div class="card-header">
      <div class="card-header-title">Selection Tagger</div>
    </div>
    <div class="card-content">


        <div class="field">
          <label class="label">Source URL</label>
          <div class="control">
            <input class="input" type="text" formControlName="sourceUrl">
          </div>
        </div>
        <div class="field">
          <label class="label">Text selection</label>
          <div class="control">
            <input class="input" type="text" formControlName="selectionText">
          </div>
        </div>

        <!--<div class="tag-fields-wrapper" *ngFor="let tag of formCitations.controls; let i = index" [formGroupName]="i">-->
          <!--<button class="delete is-large remove-tag-button" aria-label="delete" type="button" (click)="removeCitation(i)"></button>-->

      <div formGroupName="citation">

          <div class="field">
            <label class="label">Name</label>
            <div class="control">
              <input class="input" type="text" formControlName="name">
            </div>
          </div>
          <div class="field">
            <label class="label">Genre</label>
            <div class="control">
              <input class="input" type="text" formControlName="genre">
            </div>
          </div>
          <div class="field">
            <label class="label">Description</label>
            <div class="control">
              <input class="input" type="text" formControlName="description">
            </div>
          </div>
          <div class="field">
            <label class="label">Number of pages</label>
            <div class="control">
              <input class="input" type="text" formControlName="numberOfPages">
            </div>
          </div>
          <div class="field">
            <label class="label">Publisher</label>
            <div class="control">
              <input class="input" type="text" formControlName="publisher">
            </div>
          </div>
          <div class="field">
            <label class="label">Copyright Holder</label>
            <div class="control">
              <input class="input" type="text" formControlName="copyrightHolder">
            </div>
          </div>
          <div class="field">
            <label class="label">Copyright Year</label>
            <div class="control">
              <input class="input" type="text" formControlName="copyrightYear">
            </div>
          </div>
          <div class="field">
            <label class="label">ISBN</label>
            <div class="control">
              <input class="input" type="text" formControlName="isbn">
            </div>
          </div>

        <div class="control">
          <div class="select">
            <select formControlName="visibility">
              <option>Public</option>
              <option>Private</option>
              <option>Custom</option>
            </select>
          </div>
        </div>

      </div>


        <!--</div>-->
        <!--<button class="is-large remove-tag-button" type="button" (click)="addCitation()">Add Citation</button>-->



      <!-- Keywords = multiple keyword objects -->

      <!-- Annotations (academic style - see Wikipedia) -->

      <!--Schema.org citation use CreativeWork -->
      <!--"copyrightHolder": {-->
      <!--"@type": "Organization",-->
      <!--"name": "Holt, Rinehart and Winston"-->
      <!--},-->
      <!--"copyrightYear": "2007",-->
      <!--"description": "NIMAC-sourced textbook",-->
      <!--"genre": "Educational Materials",-->
      <!--"inLanguage": "en-US",-->
      <!--"isFamilyFriendly": "true",-->
      <!--"isbn": "9780030426599",-->
      <!--"name": "Holt Physical Science",-->
      <!--"numberOfPages": "598",-->
      <!--"publisher": {-->
      <!--"@type": "Organization",-->
      <!--"name": "Holt, Rinehart and Winston"-->
      <!--}-->

    </div>
    <div class="card-footer">
      <div class="card-footer-item">
        <button type="button" class="button is-link" [disabled]="form.invalid">Submit</button>
        <button type="button" class="button is-light" (click)="onCancel()" >Cancel</button>
      </div>
    </div>
  </div>
  </form>
  </div>

</ng-template>

<ng-template #doneDialog>
  <div class="modal is-active">
    <div class="modal-background"></div>
    <div class="modal-content">

      <article class="message is-success">
        <div class="message-header">
          <p>Done</p>
          <button class="delete" (click)="onCancel()" aria-label="delete"></button>
        </div>
        <div class="message-body">
          Metadata submitted.
        </div>
      </article>

    </div>
  </div>
</ng-template>
